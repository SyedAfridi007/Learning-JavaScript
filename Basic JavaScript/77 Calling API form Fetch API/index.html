<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>

        //4 ways to call api - fetch, XMLHttpRequest, axios, jquery

        //fetch replaced XMLHttpRequest
        //fetch()- global method for making HTTP Request
        //2 ways to call - then, async await


        //fetch doesn't support all the browser
        //fetch return a promise

        /*
        console.log(window.fetch);

        
        fetch('https://jsonplaceholder.typicode.com/posts/1', {
            //method: 'POST',
            //method:'PUT',
            //method:'PATCH',
            method:'DELETE',
            /*
            body: JSON.stringify({
                title: "foomaaaa",
                body:"bar",
                userId: 1,
            }),
            headers: {
                'Content-type': 'application/json; charset=UTF-8',
            },
            */
           /*
        })
        .then((res) =>{
          if(!res.ok){
              const message = `Error: ${res.status}`
              throw new Error(message)
          } 
          return res.json() ;
        })
        .then((res) => console.log(res))
        .catch((err) => console.log(err))


        */


        /*Get Data
        const makeRequest = async(url) =>{
            const res = await fetch(url);
            if(!res.ok){
                const message = `Error is: ${res.status}`;
                throw new Error(message);
            }
            const data = await res.json();
            return data;
        }

       
        const getData = () => {
            makeRequest('https://jsonplaceholder.typicode.com/posts/1')
            .then((res) => console.log(res))
            .catch((err) => console.log(err))
        };
        getData();
        */


        
        /*Send Data
        const makeRequest = async(url, config) =>{
            const res = await fetch(url, config);
            if(!res.ok){
                const message = `Error is: ${res.status}`;
                throw new Error(message);
            }
            const data = await res.json();
            return data;
        }

       
        const sendData = () => {
            makeRequest('https://jsonplaceholder.typicode.com/posts',{
                method: 'POST',
                body: JSON.stringify({
                  title: 'foo',
                  body: 'bar',
                  userId: 1,
                }),
                headers: {          
                   'Content-type': 'application/json; charset=UTF-8',
                },
            })
            .then((res) => console.log(res))
            .catch((err) => console.log(err))
        };
        sendData();
        */

        
        const makeRequest = async(url, config) =>{
            const res = await fetch(url, config);
            if(!res.ok){
                const message = `Error is: ${res.status}`;
                throw new Error(message);
            }
            const data = await res.json();
            return data;
        }

       /*Update data
        const updateData = () => {
            makeRequest('https://jsonplaceholder.typicode.com/posts/1',{
                method: 'PUT',
                body: JSON.stringify({
                  title: 'foom',
                  body: 'bar',
                  userId: 1,
                }),
                headers: {          
                   'Content-type': 'application/json; charset=UTF-8',
                },
            })
            .then((res) => console.log(res))
            .catch((err) => console.log(err))
        };
        updateData();
        */


        /*Update single data
        const updateSingleData = () => {
            makeRequest('https://jsonplaceholder.typicode.com/posts/1',{
                method: 'PATCH',
                body: JSON.stringify({
                  body: 'Wiskey',
                }),
                headers: {          
                   'Content-type': 'application/json; charset=UTF-8',
                },
            })
            .then((res) => console.log(res))
            .catch((err) => console.log(err))
        };
        updateSingleData();
        */

        /*Delete Data
        const deleteData = () => {
            makeRequest('https://jsonplaceholder.typicode.com/posts/1',{
                method: 'DELETE',
            })
            .then((res) => console.log(res))
            .catch((err) => console.log(err))
        };
        deleteData();
        */






    </script>
</body>
</html>